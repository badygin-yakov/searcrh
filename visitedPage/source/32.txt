TM Feed Хабрахабр Geektimes Тостер Мой круг Фрилансим Мегапосты: Хабрахабр Публикации Пользователи Хабы Компании Песочница Войти Регистрация akme сегодня в 21:56 Визуализация связей процессов в Linux Системное администрирование, Open source Приходилось ли вам отслеживать зависимости системных процессов, «кто чей папка», найти императора и убить его, чтобы рабы не респаунились? Можно ps'ать и grep'ать, можно lsof погонять, ведь это так увлекательно ;) Но любые связи, как мне кажется, всегда проще анализировать в визуальной форме, консольные утилиты рисуют хорошие таблички, но из них не всегда можно быстро понять, что с чем связано и в какой последовательности, а для диагностики это очень важно. lsof (сокр. LiSt Open Files) при определенной сноровке позволяет строить графы взаимосвязей между запущенными системами, кто какие файлы использует, кто с кем по каким протоколом общается. На хабре уже была статья про то, какой полезный инструмент lsof, но в ней не было ничего сказано про ключ -F, который позволяет выводить информацию не в виде таблицы, а в виде последовательности отдельных строк, которые можно перенаправить на вход другой программы для дальнейшей обработки. lsofgraph был написан, как раз под этот -F, парсить такой вывод гораздо удобнее чем табличный вывод. К сожалению, lsofgraph был написан на Lua, а она не везде стоит, так что был переписан на python: lsofgraph-python Формат простой, а код достаточно понятный, так что не будем на этом останавливаться, а пустимся сразу в бой. Для рисования будем использовать graphviz, а именно, входящие в его состав, dot и unflatten. Если хотите получить полную картину по системе, то надо будет использовать sudo, если же достаточно информации по текущему аккаунту, то можно и без sudo обойтись. Чтобы создать граф: sudo lsof -n -F | python lsofgraph.py | dot -Tjpg > /tmp/a.jpg Мне больше нравится запуск c unflatten, тогда график как-то более компактно и красиво выглядит: sudo lsof -n -F | python lsofgraph.py | unflatten -l 1 -c 6 | dot -T jpg > /tmp/a.jpg Пример графика, на достаточно пустой тестовой виртуалке: Надеюсь, что кому-нибудь это все-таки будет полезно ;) Метки: linux graphviz lsof system administration Добавить метки Пометьте публикацию своими метками Метки необходимо разделять запятой. Например: php, javascript, андронный коллайдер, задача трех тел Сохранить AdBlock похитил этот баннер, но баннеры не зубы — отрастут Подробнее Реклама Читают сейчас Почему в 2018 году я использую метод разработки, которому уже 30 лет 12,9k 19 Firefox Gecko, «который мы потеряли» 5,8k 71 Как пользователи учат Яндекс предупреждать о телефонном спаме 9k 96 TDD ошибочно? 2,3k 2 Почему "=" означает присваивание? 4,8k 8 Приложения, достигшие самосознания: автоматизированная диагностика в продакшне 1,5k 0 AdBlock похитил этот баннер, но баннеры не зубы — отрастут Подробнее Реклама +5 8 258 1 Выберите рекомендации для отправки автору: Указан только блог Орфографические ошибки Пунктуационные ошибки Отступы Текст-простыня Короткие предложения Смайлики Много форматирования Картинки Ссылки Оформление кода Рекламный характер Отправить Нарушение Опишите суть нарушения Отправить 123,5 Карма 4,0 Рейтинг 29 Подписчики akme Пользователь Поделиться публикацией Похожие публикации 2 апреля в 14:55 REST-сервисы на ASP.NET Core под Linux в продакшене +42 9,2k 144 14 30 июля 2015 в 15:44 Forensic system administration +23 15,4k 113 6 13 июня 2013 в 12:14 IBM продвигает Linux в корпоративном сегменте +48 19k 22 9 Вакансии QA Engineer ArtStation Labs Казань Полный рабочий день от 50 000 до 80 000 IOS разработчик ArtStation Labs Казань Полный рабочий день от 70 000 до 120 000 Junior C#/.NET Developer Тенет Казань Полный рабочий день от 30 000 Java Developer Тенет Казань Полный рабочий день от 60 000 до 120 000 Frontend developer (фронтенд-разработчик) MyWed Рязань Полный рабочий день от 60 000 до 70 000 Все вакансии Разместить вакансию AdBlock похитил этот баннер, но баннеры не зубы — отрастут Подробнее Реклама Комментарии 1 SirEdvin 11.04.18 в 22:21 0 Вы не поверите, но python тоже не везде стоит :( Только полноправные пользователи могут оставлять комментарии. Войдите, пожалуйста. Что обсуждают Сейчас Вчера Неделя Игра Snake в 93 байта 13,7k 21 Фреймворк для бессерверных приложений в AWS 1,9k 6 Для чего программисту Continuous Integration и с чего начинать 14,9k 42 Хакеры атаковали пользователей криптобиржи Poloniex с помощью поддельного мобильного приложения 667 2 Как пользователи учат Яндекс предупреждать о телефонном спаме 9k 96 Диванный вице-президент: как я работаю директором по продуктам на полной удалёнке 10,5k 132 Как пользователи учат Яндекс предупреждать о телефонном спаме 9k 96 Firefox Gecko, «который мы потеряли» 5,8k 71 Для чего программисту Continuous Integration и с чего начинать 14,9k 42 Применение сверточных нейронных сетей для задач NLP 10,5k 21 Как специалисты Google Adwords помогли мне выбросить 150 000 грн (около $6000) за месяц или почему я больше не буду… 49k 251 Мессенджеры, пора делать следующий шаг 30,2k 220 Почему я не подписываю соглашения о неконкуренции 32,7k 166 Диванный вице-президент: как я работаю директором по продуктам на полной удалёнке 10,5k 132 Осторожнее с копипастом: фингерпринтинг текста непечатаемыми символами 30,1k 93 Самое читаемое Сутки Неделя Месяц Почему в 2018 году я использую метод разработки, которому уже 30 лет +24 12,9k 56 19 История про блокчейн и немного про биткойны +24 10,8k 65 18 Для чего программисту Continuous Integration и с чего начинать +42 14,9k 220 42 Как пользователи учат Яндекс предупреждать о телефонном спаме +48 9k 18 96 Firefox Gecko, «который мы потеряли» +10 5,8k 15 71 Как специалисты Google Adwords помогли мне выбросить 150 000 грн (около $6000) за месяц или почему я больше не буду… +86 49k 123 251 Как я за 9 месяцев превратился из неофита в разработчика ПО без отрыва от основной работы +31 38k 305 38 Почему я не подписываю соглашения о неконкуренции +87 32,7k 84 166 Конференция DEFCON 23. «Как я сбивал назойливый дрон соседского ребёнка». Майкл Робинсон +60 30,7k 135 38 Мессенджеры, пора делать следующий шаг +18 30,2k 83 220 Как уже снова не получить телефон (почти) любой красотки в Москве, или интересная особенность MT_FREE +129 163k 260 101 Мы нашли крупную компанию, которая 5 лет не занималась информационной безопасностью, и она ещё жива +30 79k 119 97 Как Red Hat убила свой главный продукт и стала многомиллиардной корпорацией +89 67,4k 105 68 Дискредитация специалистов или современные собеседования +77 61,6k 153 675 [BugBounty] Раскрытие 5 миллионов ссылок в приватные чаты Telegram и возможность редактирования любой статьи telegra.ph +116 58k 172 66 Интересные публикации Хабрахабр Geektimes Обнаружена уязвимость в панели управления хостингом Vesta CP +5 222 3 0 Роскомнадзор продолжает уничтожать Интернет: настала очередь Google GT +9 4k 4 12 Имитация левитации воды на Ардуино GT +18 2,9k 14 16 Охота на Dofoil с помощью Windows Defender ATP +10 442 2 1 Лишать гарантии за оторванную наклейку или пломбу — незаконно GT +16 3,8k 7 1 TDD ошибочно? +22 2,3k 28 2 Журналисты нашли в Москве 11 пунктов обмена криптовалюты и 4 биткоин-банкомата +7 1,6k 3 2 JNI: Подружим Java и C++ +6 1,4k 26 4 Новый апдейт iOS сделал неоригинальные экраны «восьмерок» неработоспособными GT +24 10,3k 7 37 Apple заставят заплатить $500 млн патентному троллю GT +8 5,6k 3 6 AdBlock похитил этот баннер, но баннеры не зубы — отрастут Подробнее Реклама Аккаунт Войти Регистрация Разделы Публикации Хабы Компании Пользователи Песочница Информация Правила Помощь Документация Соглашение Конфиденциальность Услуги Реклама Тарифы Контент Семинары Приложения © 2006 – 2018 «TM» О сайте Служба поддержки Мобильная версия
